<!DOCTYPE html>
<html lang="en" dir="rtl">

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="CSS/bootstrap.min.css">
    <link rel="stylesheet" href="Css/main.css">
    <link rel="shortcut icon" href="images/Books.png" type="image/png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flickity/2.3.0/flickity.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اضافة طلب</title>
</head>

<body>
    <div class="container-fluid">
        <div class="row">
            <nav class="col-md-3 col-lg-2 sidebar">
                <div class="text-center profile-pic-mina">
                    
                    <div class="circular-img-prof-mina">
                        <img src="Images/shahn.png" alt="company img">

                    </div>
                    <p>مريم نعيم</p>
                </div>
                <a href="main.html">🏠 الرئيسية</a>
                <div class="accordion" id="casesAccordion" >
                    <div class="accordion-item item-drop-mina" >
                        <h2 class="accordion-header">
                            <button   class="accordion-button collapsed btn-drop-mina" type="button" data-bs-toggle="collapse" 
                                data-bs-target="#casesMenu" aria-expanded="false" aria-controls="casesMenu" >
                                🚚 الحالات
                            </button>
                        </h2>
                        <div id="casesMenu" class="accordion-collapse collapse" data-bs-parent="#casesAccordion">
                            <div class="accordion-body">
                                <ul class="list-unstyled">
                                    
                                    <li><a href="index.html">جميع الحالات</a></li>

                                    <li><a href="#">تم التسليم</a></li>
                                    <li><a href="#">تم الإلغاء</a></li>
                                    <li><a href="#">قيد الانتظار</a></li>
                                    <li><a href="#">تم التأجيل</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="accordion" id="casesAccordion" >
                    <div class="accordion-item item-drop-mina" >
                        <h2 class="accordion-header">
                            <button   class="accordion-button collapsed btn-drop-mina" type="button" data-bs-toggle="collapse" 
                                data-bs-target="#casesMenu2" aria-expanded="false" aria-controls="casesMenu2" >
                                💁‍♂ المستخدمين
                            </button>
                        </h2>
                        <div id="casesMenu2" class="accordion-collapse collapse" data-bs-parent="#casesAccordion">
                            <div class="accordion-body">
                                <ul class="list-unstyled">
                                    <li><a href="#">تاجر</a></li>
                                    <li><a href="#">مندوب</a></li>
                                    <li><a href="#">ادمن</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <a href="#">
                    📦 الطلبات
                </a>
                <a href="#">
                    💰 المصروفات
                </a>
                <a href="#">
                    📊 الإحصائيات
                </a>
                <a href="#">
                    📍 المحافظات
                </a>
                <a href="#">
                    🏢 الفروع
                </a>
                <a href="#">
                    🔒 تسجيل الخروج
                </a>
                         
            </nav>
            <main class="col-md-9 col-lg-10">
                <div class="top-bar">
                    <div>
                        <div class="makar-mina">
                            <p class="nav-things-mina pt-3"> الاجمالي : -125</p>
                        </div>
                        
                    </div>
                    <div class="logo-div-mina">
                        <img src="Images/shahn.png" alt="auto move logo">
                    </div>
                </div>
                <div class="container mt-5 tager-amira">
                    <div class="card">
                        <div class="card-header ">
                           </i><i style="color: #FFC301;" class="fa-solid fa-dolly"></i> اضافة طلب <span class="float-start"></span>
                        </div>
                        <div class="card-body">
                            <form id="merchantForm">
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label for="companyName" class="form-label">اسم الطلب:</label>
                                        <input type="text" class="form-control border-form-amira" id="companyName" required>
                                    </div>
                                    
                                    <div class="col-md-6">
                                        <label for="order_province" class="form-label">محافظةالطلب:</label>
                                        <select name="محافظةالعمل" class="form-select form-control border-form-amira" id="order_province" required>
                                            <option value="القاهرة">القاهرة</option>
                                            <option value="الجيزة">الجيزة</option>
                                            <option value="القليوبية">القليوبية</option>
                                            <option value="الإسكندرية">الإسكندرية</option>
                                            <option value="البحيرة">البحيرة</option>
                                            <option value="كفر الشيخ">كفر الشيخ</option>
                                            <option value="الغربية">الغربية</option>
                                            <option value="المنوفية">المنوفية</option>
                                            <option value="الدقهلية">الدقهلية</option>
                                            <option value="الشرقية">الشرقية</option>
                                            <option value="دمياط">دمياط</option>
                                            <option value="بورسعيد">بورسعيد</option>
                                            <option value="الإسماعيلية">الإسماعيلية</option>
                                            <option value="السويس">السويس</option>
                                            <option value="شمال سيناء">شمال سيناء</option>
                                            <option value="جنوب سيناء">جنوب سيناء</option>
                                            <option value="بني سويف">بني سويف</option>
                                            <option value="الفيوم">الفيوم</option>
                                            <option value="المنيا">المنيا</option>
                                            <option value="أسيوط">أسيوط</option>
                                            <option value="سوهاج">سوهاج</option>
                                            <option value="قنا">قنا</option>
                                            <option value="الأقصر">الأقصر</option>
                                            <option value="أسوان">أسوان</option>
                                            <option value="الوادي الجديد">الوادي الجديد</option>
                                            <option value="مطروح">مطروح</option>
                                            <option value="البحر الأحمر">البحر الأحمر</option>
                                          </select>
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label for="address" class="form-label">عنوان التوصيل:</label>
                                        <input type="text" class="form-control border-form-amira" id="address" required>
                                    </div>
                                    <div class="col-md-6">

                                        <label for="headquartersLocation" class="form-label"> التاجر:</label>
                                        <select class="form-select border-form-amira" id="headquartersLocation">
                                            <option > شركة1</option>
                                            <option >شركة2</option>
                                            </select>
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label for="headquartersLocation" class="form-label"> نوع الشحن:</label>
                                        <select class="form-select border-form-amira" id="headquartersLocation">
                                            <option >شحن عادي</option>
                                            <option >شحن خلال 24 ساعة</option>
                                            <option >شحن في نفس اليوم</option>
                                            </select>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="headquartersLocation" class="form-label">  حالة الطلب:</label>
                                        <select class="form-select border-form-amira" id="headquartersLocation">
                                            <option > جديد</option>
                                            <option >  في المخزن </option>
                                            </select>
                                    </div>
                                </div>
                                
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                    <label for="headquartersLocation" class="form-label">  الفرع:</label>
                                    <select class="form-select border-form-amira" id="headquartersLocation">
                                        <option value="cairo">القاهرة</option>
                                        <option value="giza">الجيزة</option>
                                        </select>
                                        </div>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                    <label for="mola7zat" class="form-label">  ملاحظات علي الطلب:</label>
                                    <textarea class="form-control border-form-amira" id="mola7zat" required> </textarea>
                                    </div>
                                </div>
                                <div class="order-summary">
                                    <h4 class="mb-3">تفاصيل الطلب</h4>
                                    <table class="table table-bordered text-center" id="orderTable">
                                        <thead class="table-light">
                                            <tr>
                                                
                                                <th>وصف المنتج</th>
                                                <th>العدد</th>
                                                <th>سعر القطعة</th>
                                                <th>السعر الكلي</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <!-- <tr>
                                               
                                                <td> <input type="text" class="form-control " id="companyName" required> </td>
                                                <td><input type="text" class="form-control " id="companyName" required></td>
                                                <td><input type="text" class="form-control " id="companyName" required></td>
                                                <td>100$</td>
                                                <td><button class="btn btn-danger btn-sm delete-product">🗑 حذف</button></td>
                                            </tr> -->
                                        </tbody>
                                    </table>
                                    <a href="#" class="text-success" id="addProduct">+ إضافة منتج</a>
                        
                                    <h4 class="mt-4">تفاصيل سعر الطلب</h4>
                                    <div class="p-3 border rounded bg-light">
                                        <p>مجموع المنتجات: <span class="fw-bold" id="totalProducts"></span></p>
                                        <p>إجمالي سعر الطلب: <span class="fw-bold" id="totalPrice"></span></p>
                                        <p>مصاريف الشحن: <span class="fw-bold"></span></p>
                                        <hr>
                                        <p class="fw-bold">المبلغ الكلي: <span id="finalAmount"></span></p>
                                    </div>
                                   
                                </div>


            
            
                                <div class="div-btn-amira">
                                    <button type="submit" class="btn btn-primary btn-amira">أضافة</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </main>
        
        </div>
    </div>
    <script>
       $(document).ready(function () {
    let productCount = 1;
    let totalPrice = 500;
    let shippingCost = 0;

    $('#addProduct').click(function (e) {
        e.preventDefault(); // Prevent the default anchor behavior
        productCount++;

        let newRow = `
            <tr>
                
                <td><input type="text" class="form-control" required></td>
                <td><input type="number" class="form-control product-quantity" value="1" required></td>
                <td><input type="number" class="form-control product-price" value="100" required></td>
                <td class="total-item-price">100$</td>
                <td><button class="btn btn-danger btn-sm delete-product">🗑 حذف</button></td>
            </tr>`;

        $('#orderTable tbody').append(newRow);
        updateTotal();
    });

    function updateTotal() {
        let total = 0;
        $('.product-price').each(function () {
            let row = $(this).closest('tr');
            let price = parseInt(row.find('.product-price').val()) || 0;
            let quantity = parseInt(row.find('.product-quantity').val()) || 1;
            total += price * quantity;
        });

        $('#totalProducts').text($('.product-quantity').length);
        $('#totalPrice').text(total + '$');
        $('#finalAmount').text((total + shippingCost) + '$');
    }

    $(document).on('input', '.product-price, .product-quantity', function () {
        let row = $(this).closest('tr');
        let price = parseInt(row.find('.product-price').val()) || 0;
        let quantity = parseInt(row.find('.product-quantity').val()) || 1;
        let totalItemPrice = price * quantity;

        row.find('.total-item-price').text(totalItemPrice + '$');
        updateTotal();
    });

    // Event to remove a product row
    $(document).on('click', '.delete-product', function () {
        $(this).closest('tr').remove();
        updateTotal();
    });
});

    </script>

    <script src="Js/bootstrap.bundle.min.js">
    </script>
     <script src="Js/main.js">
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flickity/2.3.0/flickity.pkgd.min.js">
    </script>
</body>

</html>